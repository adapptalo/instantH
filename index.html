<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="format-detection" content="telephone=no" />
		<meta content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width, height=device-height" name="viewport" />
		<title>Drumpad</title>
		<script src="cordova.js"></script>
                <script src="js/zepto.js"></script>
        <script src="js/raf.js"></script>
        <script src="js/index.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
                        $('input').click(function () {
                            var id = $(this).get();
                            toggleButtons(id);
                        });
                        function toggleButtons(id){
                            // Check for attr != disabled here
                            $('input').removeAttr("disabled");
                            $(id).attr("disabled","disabled");
                        }        
                        });
                        
			var lla;
			
			function onBodyLoad() {		
				document.addEventListener("deviceready", onDeviceReady, false);
			}
			
			function onDeviceReady() {
				if( window.plugins && window.plugins.LowLatencyAudio ) {
					//alert("entra aqui...");
					lla = window.plugins.LowLatencyAudio;	
					
					lla.preloadFX('assets/bass.mp3', 'assets/bass.mp3', function(msg){}, function(msg){ alert( 'Error: ' + msg ); });
					lla.preloadFX('assets/snare.mp3', 'assets/snare.mp3', function(msg){}, function(msg){ alert( 'Error: ' + msg ); });
					lla.preloadFX('assets/highhat.mp3', 'assets/highhat.mp3', function(msg){}, function(msg){ alert( 'Error: ' + msg ); });
					lla.preloadFX('assets/bongo.mp3', 'assets/bongo.mp3', function(msg){}, function(msg){ alert( 'Error: ' + msg ); });
                                        lla.preloadFX('cymbal', 'assets/cymbal.mp3', function(msg){}, function(msg){ alert( 'Error: ' + msg ); });
					lla.preloadFX('drum', 'assets/drum.mp3', function(msg){}, function(msg){ alert( 'Error: ' + msg ); });	                                          
                                        //lla.unload('cymbal', successHandler, errorHandler);
                                        lla.preloadAudio('background', 'assets/background.mp3', 1);
                    
                    
				}else{
                                    alert("No plugin installed!!");
                                }
			}
			
			function play(drum) {
				document.getElementById(drum).className = 'drum touched';
				lla.play('assets/' + drum + '.mp3');
			}
			
			function touchEnd(event) {
				event.target.className = 'drum';
			}
                        function loop()
                        {
                            lla.loop('background', successHandler, errorHandler);
                        }
                        function stoploop()
                        {
                            lla.stop('background', successHandler, errorHandler);
                        }
                        function successHandler (result) {
                            //alert( result );
                        }

                        function errorHandler (error) {
                            alert( error );
                        }
                        function overlap()
                        {
                            setTimeout( function() {lla.play('cymbal');}, 300 );
                            setTimeout( function() {lla.play('drum');}, 600 );
                            setTimeout( function() {lla.play('cymbal');}, 900 );
                            setTimeout( function() {lla.play('drum');}, 900 );
                            setTimeout( function() {lla.play('drum');}, 950 );
                            setTimeout( function() {lla.play('drum');}, 2000 );
                            setTimeout( function() {lla.play('cymbal');}, 2000 );
                        }
			
		</script>
		<style>

body {
    background-image:url('background.jpg');
    background-position: -100px -100px;
    margin:0px;
    padding:0px;
}

.clouds {
    position:fixed;
    top:0px;
    bottom:0px;
    left:0px;
    right:0px;
    margin:0px;
    padding:0px;
    
    background-image:url('background-clouds.png');
    background-position: -100px -100px;
    margin:0px;
    padding:0px;
}

.content {
    position:fixed;
    top:20px;
    bottom:0px;
    left:0px;
    right:0px;
    overflow:scroll;
    -webkit-overflow-scrolling:touch;
    margin-bottom:0px;
    padding:0px 10px;
    transform: translate3d( 0px,0px,0px;)
}

.footer {
    position:fixed;
    height:22px;
    left:0px;
    right:0px;
    bottom:0px;
    background: rgba(255,255,255,0.9);
    color:888;
    text-align:center;
    padding:5px 0px 0px 0px;
    border-top:5px solid #CCC;
    font-size:12px;
}

button {
    width:80px;
    height:80px;
    float:left;
    margin:10px;
    border-radius: 20px;
    background: rgba(255,255,255,1);
}


/* using this media query to force center content on my android device (samsung galaxy s4 )*/
@media screen and (device-aspect-ratio: 9/16) {
    .content {
        padding:0px 30px;
    }
}
			* {
				-webkit-overflow-scrolling: !important;
				-webkit-tap-highlight-color: rgba(0, 0, 0, 0) !important;
				-webkit-user-select: auto !important;
			}
			html, body {
				width: 100%;
				height: 100%;
				margin: 0;
				padding: 0;
				background: #000;
                                text-align: center;
			}
			.drum {
				width: 50%;
				height: 50%;
				float: left;
				position: relative;
				border-radius: 30px;
				outline: 1px solid #000;
				background: #fff;
				font-size: 15px;
				font-family: sans-serif;
				font-weight: bold;
				text-align: center;
				text-transform: uppercase;
				letter-spacing: 2px;
				color: #999;
				line-height: 50px;
			}
			.touched {
				color: #e87fa9;  
				background-color: #c31b5e;  
				outline: 1px solid #680b30;
			}
                        
                        .overlap {
                             background-color: #EEEEEE;
                            border: 1px dashed #333333;
                           width: 100px; /* replace this "xxx" with desired width */
                            margin-top: 0px;
                            margin-right: auto;
                            margin-bottom: 0px;
                            margin-left: auto;
                            position: relative;
                            left: 0px;
                            top: 0px;
                        }
                        
                        .box {

                            height: 100%;
                            display: -webkit-box;
                            display: -moz-box;
                            display: -ms-flexbox;
                            display: -webkit-flex;
                            display: flex;
                            -webkit-box-direction: normal;
                            -moz-box-direction: normal;
                            -webkit-box-orient: horizontal;
                            -moz-box-orient: horizontal;
                            -webkit-flex-direction: row;
                            -ms-flex-direction: row;
                            flex-direction: row;
                            -webkit-flex-wrap: wrap;
                            -ms-flex-wrap: wrap;
                            flex-wrap: wrap;
                            -webkit-box-pack: center;
                            -moz-box-pack: center;
                            -webkit-justify-content: center;
                            -ms-flex-pack: center;
                            justify-content: center;
                            -webkit-box-align: center;
                            -moz-box-align: center;
                            -webkit-align-items: center;
                            -ms-flex-align: center;
                            align-items: center;
                            }
                        .box div
                        {
                            width: 100px;
                            height:100px;
                            background: brown;
                            margin: 0 10px;
                        }

                        
                        /***********************/
        
input.switch:empty
{
	margin-left: -999px;
}

input.switch:empty ~ label
{
	position: relative;
	float: left;
	line-height: 1.6em;
	text-indent: 4em;
	margin: 0.2em 0;
	cursor: pointer;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

input.switch:empty ~ label:before, 
input.switch:empty ~ label:after
{
	position: absolute;
	display: block;
	top: 0;
	bottom: 0;
	left: 0;
	content: ' ';
	width: 3.6em;
	background-color: #c33;
	border-radius: 0.3em;
	box-shadow: inset 0 0.2em 0 rgba(0,0,0,0.3);
	-webkit-transition: all 100ms ease-in;
  transition: all 100ms ease-in;
}

input.switch:empty ~ label:after
{
	width: 1.4em;
	top: 0.1em;
	bottom: 0.1em;
	margin-left: 0.1em;
	background-color: #fff;
	border-radius: 0.15em;
	box-shadow: inset 0 -0.2em 0 rgba(0,0,0,0.2);
}

input.switch:checked ~ label:before
{
	background-color: #393;
}

input.switch:checked ~ label:after
{
	margin-left: 2.1em;
}
/*   button {
    background: -moz-linear-gradient(center top , #EFEFEF 25%, #E2E2E2 50%, #EFEFEF 75%) repeat scroll 0 0 rgba(0, 0, 0, 0);
    border: medium none;
    border-radius: 60px;
    box-shadow: 0 3px 10px 1px #894E30, 0 0 1px 2px #917760, 0 -6px 2px rgba(0, 0, 0, 0.15) inset, 0 5px 2px rgba(0, 0, 0, 0.1) inset, 0 12px 2px #FFFFFF inset;
    color: #CFCFCF;
    cursor: pointer;
    font-family: Helvetica,Arial,sans-serif;
    font-size: 2em;
    height: 400px;
    outline: medium none;
    padding: 70px 0;
    position: relative;
    width: 400px;
}
button::-moz-focus-inner {
    border: 0 none;
}
button:before, button:after, button span:before, button span:after {
    background: -moz-linear-gradient(center top , rgba(152, 152, 152, 0) 0%, #FFFFFF 100%) repeat scroll 0 0 rgba(0, 0, 0, 0);
    border-radius: 60px;
    box-shadow: 0 2px 1px #FFFFFF, 0 1px 1px #888888 inset, 0 2px 3px #999999 inset, 0 8px 4px rgba(255, 255, 255, 0.7) inset, 0 0 10px rgba(0, 0, 0, 0.1) inset;
    color: #999999;
    content: "×";
    font-size: 0.5em;
    font-weight: bold;
    height: 21px;
    left: 30px;
    line-height: 21px;
    position: absolute;
    text-shadow: 0 1px 0 #FFFFFF;
    top: 25px;
    width: 21px;
}
button:after {
    left: auto;
    right: 30px;
}
button span:before {
    left: -90px;
    top: 278px;
}
button span:after {
    left: auto;
    right: -90px;
    top: 278px;
}
button span {
    background: none repeat scroll 0 0 #FFFFFF;
    border-radius: 40px;
    box-shadow: 0 0 1px 1px #CCCCCC inset, 0 0 0 8px #DDDDDD inset, 0 0 0 10px #888888 inset, 0 10px 0 10px #FFFFFF inset;
    display: block;
    height: 250px;
    margin: 0 auto;
    position: relative;
    width: 160px;
    z-index: 1;
}
button span > b:first-child {
    background: -moz-linear-gradient(center top , #E5E5E5 0%, #FFFFFF 60%, #FFFFFF 100%) repeat scroll 0 0 rgba(0, 0, 0, 0);
    border-radius: 31px;
    box-shadow: 0 7px 10px rgba(0, 0, 0, 0.07) inset;
    color: #CCCCCC;
    height: 70%;
    left: 10px;
    padding-top: 10px;
    position: absolute;
    text-shadow: 0 -1px 0 #666666, 0 1px 0 #FFFFFF;
    top: 11px;
    width: 140px;
}
button span > b:last-child {
    background: none repeat scroll 0 0 #FFFFFF;
    border-radius: 40px;
    bottom: 17%;
    color: #EEEEEE;
    height: 18%;
    left: 10px;
    padding-top: 20px;
    position: absolute;
    text-shadow: 0 -1px 0 #DDDDDD, 0 1px 0 #FFFFFF;
    width: 140px;
}
button span > b:last-child:before {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.2);
    border-radius: 30px;
    box-shadow: 0 -10px 10px rgba(255, 255, 255, 0.2) inset, 0 15px 20px 2px rgba(0, 0, 0, 0.2), 0 50px 30px 2px rgba(0, 0, 0, 0.1);
    content: "";
    height: 80px;
    left: 0;
    position: absolute;
    top: 17px;
    width: 140px;
    z-index: -1;
}
button.off span {
    box-shadow: 0 0 1px 1px #CCCCCC inset, 0 0 0 8px #DDDDDD inset, 0 0 0 10px #888888 inset, 0 10px 2px 1px rgba(0, 0, 0, 0.15) inset, 0 10px 6px rgba(0, 0, 0, 0.5) inset, 0 14px 14px rgba(0, 0, 0, 0.3) inset, 0 40px 0 #FFFFFF inset;
}
button.off span > b:first-child {
    background: -moz-linear-gradient(center top , #D8D8D8 0%, #FFFFFF 72%) repeat scroll 0 0 rgba(0, 0, 0, 0);
    border-radius: 35px;
    color: #AAAAAA;
    height: 70%;
    left: 12px;
    padding-top: 10px;
    top: 18%;
    width: 136px;
}
button.off span > b:last-child {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0);
    bottom: 7%;
    color: #DFDFDF;
    left: 6%;
    position: absolute;
    text-shadow: 0 -1px 0 #BBBBBB, 0 1px 0 #FFFFFF;
    top: auto;
}
button.off span > b:last-child:before {
    display: none;
}
.dark {
    background: none repeat scroll 0 0 #000000 !important;
    display: none;
    height: 110%;
    left: 0;
    opacity: 0.9;
    position: absolute;
    top: 0;
    width: 100%;
    z-index: 1000;*/
}
		</style>
                <script type="text/javascript">
                /* iOS re-orientation fix 
                if (navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i)) {
                  var viewportmeta = document.querySelectorAll('meta[name="viewport"]')[0];
                  if (viewportmeta) {
                    viewportmeta.content = 'width=device-width, minimum-scale=1.0, maximum-scale=1.0';

                    document.body.addEventListener('gesturestart', function() {
                      viewportmeta.content = 'width=device-width, minimum-scale=0.25, maximum-scale=1.6';
                    }, false);
                  }*/

                  /* iOS hides Safari address bar 
                  window.addEventListener("load",function() {
                    setTimeout(function() {
                      window.scrollTo(0, 1);
                    }, 1000);
                  });
                }*/

                /*$(document).ready(function(){
                   on button click, toggle class "OFF" for the switch 
                  $("button").click(function () {
                    $("button").toggleClass("off");
                  });*/

                  /* by default, darkness checkbox is checked (ON) but check anyhow 
                  if ($('#enabled').is(':checked')) {
                    darkness();
                  }*/

                  /* on checkbox click, check if checked or not,
                  call the function to initiate or remove the class of "darkness" if not 
                  $('#enabled').click(function() {
                    if ($('#enabled').is(':checked')) {
                      darkness();
                    } else {
                      $(".dark").remove();
                    }
                  });*/

                  /* function darkness() {
                    adds a div for the darkness when switch is OFF 
                    $('html').append('<div class="dark"></div>');*/

                    /* on button click, make darkness 
                    $("button").click(function () {*/
                      /* avoid bug of inverting the switch i.e. "1" = OFF, "0" = ON;
                      (by disabling the lights, clicking on the switch (OFF), re-enabling the lights and clicking the switch (ON) 
                      if ($("button").hasClass("")) {
                        //do nothing
                      } else {
                        $(".dark").fadeIn(800);
                      }
                    });*/

                    /* wherever on darkness is clicked, bring the light back and move the switch to ON 
                    $(".dark").click(function () {
                      $(".dark").fadeOut(2000);
                      $("button").removeClass();
                    });
                  }
                });*/
                </script>
	</head>
	<body onload="onBodyLoad();">
            <div class="clouds"></div>
        
        <div class="content">
            
            <button><img src="assets/airplane.png" /></button>
            <button><img src="assets/crosshair.png" /></button>
            <button><img src="assets/currency.png" /></button>
            <button><img src="assets/leaf.png" /></button>
            <button><img src="assets/airplane.png" /></button>
            <button><img src="assets/crosshair.png" /></button>
            <button><img src="assets/currency.png" /></button>
            <button><img src="assets/leaf.png" /></button>
            <button><img src="assets/airplane.png" /></button>
            <button><img src="assets/crosshair.png" /></button>
            <button><img src="assets/currency.png" /></button>
            <button><img src="assets/leaf.png" /></button>
            
        </div>
            
		<!--<div>
                <input type="checkbox" id="switch1" name="switch1" class="switch" />
                <label for="switch1">first switch</label>
                </div>
            	<div>
                <input type="checkbox" id="switch1" name="switch1" class="switch" />
                <label for="switch1">first switch</label>
                </div>
            <input type="button" value="Button1" disabled="disabled" />
            <input type="button" value="Button2" />-->
           <!-- <button>
                    <span>
                      <b>I</b> <b>O</b>
                    </span>
                  </button>-->
                <div class="box">
                    
                    <div class="drum" id="bass" ontouchstart="play('bass');" ontouchend="touchEnd(event);">Bass</div>
                    <div class="drum" id="highhat" ontouchstart="play('highhat');" ontouchend="touchEnd(event);">High Hat</div>
                    <div class="drum" id="snare" ontouchstart="play('snare');" ontouchend="touchEnd(event);">Snare</div>
                    <div class="drum" id="bongo" ontouchstart="play('bongo');" ontouchend="touchEnd(event);">Bongo</div>
                    <!--<div class="container"><div class="box"></div></div>-->
                    <div class="loop drum" ontouchstart="loop();" >Loop</div>
                    <div class="loop_stop hide drum" ontouchstart="stoploop();" >Stop Loop</div>
                    <div class="overlap drum" ontouchstart="overlap();" >Overlap</div>
                </div>
	</body>
</html>